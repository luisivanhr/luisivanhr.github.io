:root{
  --scene-ar: 1.777777778;   /* 16/9 as a single number */
  --bars-color: #000000;
}

* { box-sizing: border-box; }
body { margin: 0; color: var(--ink); background: #5783ad; font-size: 22px; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial; }
a { color: #1a388b; text-decoration: none; }
a:hover { text-decoration: underline; }
.skip { position: absolute; left: -9999px; top: -9999px; }
.skip:focus { left: 16px; top: 16px; background:#000; padding:8px 12px; border-radius:6px; }


/* Letterbox container */
#desk-wrap{
  position: fixed; inset: 0;
  background: var(--bars-color);
  display:flex; align-items:center; justify-content:center;
  overflow:hidden;
}

/* Fill width; height derived from aspect-ratio */
.stage{
  position: relative;
  width: min(100vw, calc(100svh * var(--scene-ar)));
  aspect-ratio: var(--scene-ar);
}

/* fill the stage */
.desk-bg{ position:absolute; inset:0; overflow:hidden; }
.desk-bg svg, .desk-bg canvas, .board-math{
  position:absolute; inset:0; width:100%; height:100%; display:block;
}

/* stacking (unchanged) */
#desk-bg-art{ z-index:1; }
#fx-layer{ z-index:8; pointer-events:none; }
#desk-hotspots{ z-index:5; }


/* Blackboard math overlay (keeps your current manual placement) */
:root{
  /* From your old px values: left=240, top=164, width=460 on a 1600×900 viewBox */
  --board-left: 15%;        /* 240 / 1600 * 100 */
  --board-top: 18.5%;     /* 164 / 900 * 100  */
  --board-width: 28.75%;    /* 460 / 1600 * 100 */
  --board-rotate: 0.5deg;
}

.board-math{
  position: absolute; 
  left: var(--board-left);
  top: var(--board-top);
  width: var(--board-width);
  aspect-ratio: 16 / 9;     /* keeps the board rectangular */
  height: auto;
  transform: perspective(260px) rotateX(8deg) rotateY(-4deg);
  will-change: transform;
  transform-origin: center;
  pointer-events: none;
  color: #fff;
            /* stays readable; scale with clamp(...) if you like */
  line-height: 1.4;
  z-index: 10;
}

/* Overlay “screen” area that we can paint into */
.screen.models {
  position: absolute;
  /* % values so it scales like the board */
  left: 30.0%;
  top: 49.6%;
  width: 23%;
  height: 19.7%;
  z-index: 10;
  overflow: hidden;

  /* shape it into a parallelogram (tweak these points) */
  /* order: top-left, top-right, bottom-right, bottom-left */
  clip-path: polygon(0% 0%, 84% 0%, 84.1% 84.9%, 0% 100%);
  -webkit-clip-path: polygon(0% 0%, 84% 0%, 84.1% 84.9%, 0% 100%); /* Safari */

  /* visual styling */
  border-radius: 3px;            /* optional */
  box-shadow: inset 0 0 18px rgba(51, 177, 223, 0.55);
  will-change: clip-path;
}
.screen.models {
  font-size: 6%; /* 6% of the box height */
}
/* your existing internals can stay the same */
.screen.models .slide { position:absolute; inset:0; opacity:0; transition:opacity .5s; display:grid; grid-template-rows:1fr auto; background:#123242; }
.screen.models .slide.show { opacity:1; }
.screen.models .slide .img { position:absolute; inset:0; background-size:cover; background-position:center; filter:brightness(1.05) contrast(1.05) saturate(1.05); }
.screen.models .slide .caption { position:relative; z-index:1; padding:6px 8px; background:linear-gradient(180deg, rgba(8,14,20,0) 0%, rgba(8,14,20,.85) 60%, rgba(8,14,20,.95) 100%); color:#e8f3ff; font-size:clamp(1px, 1vw, 16px); line-height:1.2; text-shadow:0 1px 2px rgba(0,0,0,.6); }

/* if you kept the scanline gloss, it must be clipped too */
.screen.models::after{
  content:""; position:absolute; inset:0;
  background:repeating-linear-gradient(to bottom, rgba(255,255,255,0.04), rgba(255,255,255,0.04) 1px, transparent 1px, transparent 3px);
  mix-blend-mode:screen; pointer-events:none; opacity:.25;
  clip-path: inherit; -webkit-clip-path: inherit;
}



/* Banner / marquee */
#banner { height: 84px; display:flex; align-items:center; overflow:hidden; background:#0f131a; border-top:1px solid #1f2a33; }
#banner .track { display:flex; gap:24px; padding: 0 16px; animation: scroll 18s linear infinite; }
#banner .slide { white-space: nowrap; opacity:.85; }
@keyframes scroll { from { transform: translateX(0); } to { transform: translateX(-50%); } }

/* Tooltip */
#tooltip { position: fixed; z-index: 50; background: #061019ee; border: 1px solid #153244; border-radius: 10px; padding: 10px 12px; width: 320px; box-shadow: 0 10px 30px #0008; }
#tooltip .thumb { width: 100%; height: 140px; object-fit: cover; border-radius: 8px; display:block; }
#tooltip .title { font-weight: 700; margin-top: 8px; }
#tooltip .meta { color: var(--muted); font-size: 0.9rem; }

/* Classic nav */
.classic-nav { display:grid; grid-template-columns: repeat(auto-fit, minmax(160px,1fr)); gap:10px; }
.classic-nav a { padding:10px 12px; background:#0f131a; border:1px solid #1f2a33; border-radius: 8px; }
